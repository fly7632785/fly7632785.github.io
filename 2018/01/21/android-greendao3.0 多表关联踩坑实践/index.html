<!DOCTYPE html>
<html style="display: none;" lang="en">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.4.0 -->
    <script>window.materialVersion = "1.4.0"</script>

    <!-- Title -->
    
    <title>
        
            android greendao3.0 多表关联踩坑实践 | 
        
        Jafir&#39;s blog
    </title>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">
    
    
    
    
    
    
    
        <link rel="dns-prefetch" href="https://busuanzi.ibruce.info"/>
    
    
    
    

    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="Jafir">
    <meta name="description" itemprop="description" content="what can&#39;t kill you makes you stronger">
    <meta name="keywords" content=",android">

    <!-- Site Verification -->
    
    

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/avatar_corner.png">
    <link rel="icon" sizes="192x192" href="/img/avatar_corner.png">
    <link rel="apple-touch-icon" href="/img/avatar_corner.png">

    <!--iOS -->
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Jafir&#39;s blog">

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://fly7632785.github.io">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="android greendao3.0 多表关联踩坑实践 | Jafir&#39;s blog">
    <meta property="og:image" content="/img/avatar_corner.png" />
    <meta property="og:description" content="what can&#39;t kill you makes you stronger">
    <meta property="og:article:tag" content="android"> 

    
        <meta property="article:published_time" content="Jan 21, 2018" />
        <meta property="article:modified_time" content="Mar 13, 2018" />
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:title" content="android greendao3.0 多表关联踩坑实践 | Jafir&#39;s blog">
    <meta name="twitter:description" content="what can&#39;t kill you makes you stronger">
    <meta name="twitter:image" content="/img/avatar_corner.png">
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="http://fly7632785.github.io" />

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="http://fly7632785.github.io/2018/01/21/android-greendao3.0 多表关联踩坑实践/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Jafir&#39;s blog",
        "logo": "/img/avatar_corner.png"
    },
    "author": {
        "@type": "Person",
        "name": "Jafir",
        "image": {
            "@type": "ImageObject",
            "url": "/img/avatar_corner.png"
        },
        "description": "Hi, welcome to Jafir's blog !,I will share something nice with you !"
    },
    "headline": "android greendao3.0 多表关联踩坑实践",
    "url": "http://fly7632785.github.io/2018/01/21/android-greendao3.0 多表关联踩坑实践/index.html",
    "datePublished": "Jan 21, 2018",
    "dateModified": "Mar 13, 2018",
    "description": "what can&#39;t kill you makes you stronger",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://fly7632785.github.io"
    }
}
</script>


    

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.en.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(key){try{localStorage.removeItem(key)}catch(e){}};lsloader.setLS=function(key,val){try{localStorage.setItem(key,val)}catch(e){}};lsloader.getLS=function(key){var val="";try{val=localStorage.getItem(key)}catch(e){val=""}return val};versionString="/*"+materialVersion+"*/";lsloader.clean=function(){try{var keys=[];for(var i=0;i<localStorage.length;i++){keys.push(localStorage.key(i))}keys.forEach(function(key){var data=lsloader.getLS(key);if(data&&data.indexOf(versionString)===-1){lsloader.removeLS(key)}})}catch(e){}};lsloader.clean();lsloader.load=function(jsname,jspath,cssonload){cssonload=cssonload||function(){};var code;code=this.getLS(jsname);if(code&&code.indexOf(versionString)===-1){this.removeLS(jsname);this.requestResource(jsname,jspath,cssonload);return}if(code){var versionNumber=code.split(versionString)[0];if(versionNumber!=jspath){console.log("reload:"+jspath);this.removeLS(jsname);this.requestResource(jsname,jspath,cssonload);return}code=code.split(versionString)[1];if(/\.js?.+$/.test(versionNumber)){this.jsRunSequence.push({name:jsname,code:code});this.runjs(jspath,jsname,code)}else{document.getElementById(jsname).appendChild(document.createTextNode(code));cssonload()}}else{this.requestResource(jsname,jspath,cssonload)}};lsloader.requestResource=function(name,path,cssonload){var that=this;if(/\.js?.+$/.test(path)){this.iojs(path,name,function(path,name,code){that.setLS(name,path+versionString+code);that.runjs(path,name,code)})}else if(/\.css?.+$/.test(path)){this.iocss(path,name,function(code){document.getElementById(name).appendChild(document.createTextNode(code));that.setLS(name,path+versionString+code)},cssonload)}};lsloader.iojs=function(path,jsname,callback){var that=this;that.jsRunSequence.push({name:jsname,code:""});try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(path,jsname,xhr.response);return}}that.jsfallback(path,jsname)}};xhr.send(null)}catch(e){that.jsfallback(path,jsname)}};lsloader.iocss=function(path,jsname,callback,cssonload){var that=this;try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(xhr.response);cssonload();return}}that.cssfallback(path,jsname,cssonload)}};xhr.send(null)}catch(e){that.cssfallback(path,jsname,cssonload)}};lsloader.iofonts=function(path,jsname,callback,cssonload){var that=this;try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(xhr.response);cssonload();return}}that.cssfallback(path,jsname,cssonload)}};xhr.send(null)}catch(e){that.cssfallback(path,jsname,cssonload)}};lsloader.runjs=function(path,name,code){if(!!name&&!!code){for(var k in this.jsRunSequence){if(this.jsRunSequence[k].name==name){this.jsRunSequence[k].code=code}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var script=document.createElement("script");script.appendChild(document.createTextNode(this.jsRunSequence[0].code));script.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(script);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var that=this;var script=document.createElement("script");script.src=this.jsRunSequence[0].path;script.type="text/javascript";this.jsRunSequence[0].status="loading";script.onload=function(){that.jsRunSequence.shift();if(that.jsRunSequence.length>0){that.runjs()}};document.body.appendChild(script)}};lsloader.tagLoad=function(path,name){this.jsRunSequence.push({name:name,code:"",path:path,status:"failed"});this.runjs()};lsloader.jsfallback=function(path,name){if(!!this.jsnamemap[name]){return}else{this.jsnamemap[name]=name}for(var k in this.jsRunSequence){if(this.jsRunSequence[k].name==name){this.jsRunSequence[k].code="";this.jsRunSequence[k].status="failed";this.jsRunSequence[k].path=path}}this.runjs()};lsloader.cssfallback=function(path,name,cssonload){if(!!this.cssnamemap[name]){return}else{this.cssnamemap[name]=1}var link=document.createElement("link");link.type="text/css";link.href=path;link.rel="stylesheet";link.onload=link.onerror=cssonload;var root=document.getElementsByTagName("script")[0];root.parentNode.insertBefore(link,root)};lsloader.runInlineScript=function(scriptId,codeId){var code=document.getElementById(codeId).innerText;this.jsRunSequence.push({name:scriptId,code:code});this.runjs()};lsloader.loadCombo=function(jslist){var updateList="";var requestingModules={};for(var k in jslist){var LS=this.getLS(jslist[k].name);if(!!LS){var version=LS.split(versionString)[0];var code=LS.split(versionString)[1]}else{var version=""}if(version==jslist[k].path){this.jsRunSequence.push({name:jslist[k].name,code:code,path:jslist[k].path})}else{this.jsRunSequence.push({name:jslist[k].name,code:null,path:jslist[k].path,status:"comboloading"});requestingModules[jslist[k].name]=true;updateList+=(updateList==""?"":";")+jslist[k].path}}var that=this;if(!!updateList){var xhr=new XMLHttpRequest;xhr.open("get",combo+updateList,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){that.runCombo(xhr.response,requestingModules);return}}else{for(var i in that.jsRunSequence){if(requestingModules[that.jsRunSequence[i].name]){that.jsRunSequence[i].status="failed"}}that.runjs()}}};xhr.send(null)}this.runjs()};lsloader.runCombo=function(comboCode,requestingModules){comboCode=comboCode.split("/*combojs*/");comboCode.shift();for(var k in this.jsRunSequence){if(!!requestingModules[this.jsRunSequence[k].name]&&!!comboCode[0]){this.jsRunSequence[k].status="comboJS";this.jsRunSequence[k].code=comboCode[0];this.setLS(this.jsRunSequence[k].name,this.jsRunSequence[k].path+versionString+comboCode[0]);comboCode.shift()}}this.runjs()}})();</script>

    <!-- Import CSS & jQuery -->
    
        <style id="css/material.min.css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("css/material.min.css","/css/material.min.css?fJTiM/K1J3dWIruo3pxtAw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";})</script>
        <style id="css/style.min.css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("css/style.min.css","/css/style.min.css?oCSEO3ST+aEypEwttTDI9g==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";})</script>
        
        
            <style>
    
    
    
    
    
    
    
    .footer-sns-github {
        background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGQ9Ik0xMzguNCA3OGMtNi40IDEuNC0yNi40IDE0LjItMzYgMjIuOC04IDcuMi0yMiAyOS44LTI0LjQgMzkuMi0xLjYgNi40LTIgMTEzLjItMS42IDM2OCAuNiAyOTkuNCAxIDM1OS44IDMuNCAzNjQgMTEgMjAuMiAyMS42IDMyLjQgMzcuMiA0MyAxNS42IDEwLjYgMTcuMiAxMS4yIDM0LjIgMTMuMiAxMC42IDEuMiA2My40IDEuNiAxMjcuNiAxLjRsMTA5LjYtLjYgNi02LjggNi4yLTYuOC0xLjItMjUuMmMtLjgtMTUuOC0uMi0zMy40IDEuNC00Ny4yIDMtMjUuNCAxLjQtMzYuMi02LTQzLjItNS00LjYtNi4yLTQuOC0zMC42LTQuMi0yNy42LjgtMjQgMS42LTY4LjgtMTYtOC42LTMuNC0yMi42LTE4LTI4LjQtMjkuOC0xMS40LTIyLjgtMjctNDUtMzkuMi01NS42LTE0LTEyLjItMTkuOC0yMC44LTE5LjgtMjguNiAwLTExLjYgMTMuNi0xMi42IDMzLjItMi40IDE2LjYgOC44IDIwLjggMTIuNCA0MC44IDM2LjIgMjQuMiAyOC42IDMxIDMzLjYgNTQgMzkuNiAxNS4yIDQgNDIuMiAzIDUxLjQtMS44IDktNC42IDE4LTE1LjIgMjQuNC0yOS4yIDExLjQtMjQuMiA3LjQtMzEuMi0yMC42LTM2LjgtOS44LTItMjkuMi04LTQzLjQtMTMuNC00MC40LTE1LjgtNjQuNi0zNy40LTg1LjQtNzYuMi0xMS42LTIxLjgtMTUuNC0zMy0xOC4yLTUzLjYtNC4yLTMyLjItNC44LTYwLjItMS40LTg0IDMuNC0yMy44IDYuOC0zMi44IDIwLjItNTQgNC02IDguOC0xNS42IDExLTIxLjQgMy44LTEwIDMuOC0xMS42IDEtMzAtNS4yLTM0LjItMy4yLTUyLjQgNy42LTcwLjIgNy4yLTEyLjIgMTUtMTcuMiAyNC4yLTE1LjggMTIuOCAyLjIgNTIgMTcuNCA2Ni44IDI2LjIgMjYgMTUgMjkgMTUuNCA4Mi40IDcuMiAyNC42LTMuOCAzMy44LTQuMiA2MC0zLjIgMTcgLjYgNDEuNCAzIDU0IDUuMiAzOC40IDYuNiA0OS42IDUuMiA3My0xMCA2LjYtNC4yIDE3LjQtOS40IDI0LTExLjYgNi42LTIuMiAxNi01LjggMjEtOC4yIDEzLTYgMjgtNS42IDM1LjYuOCAxMi40IDEwLjQgMTguNiA0MS40IDE0LjQgNzEuNi00LjQgMzAuNi0zIDM5LjQgOC40IDUzLjggMy40IDQuNCAxMS4yIDE5LjIgMTcuNCAzMy4yTDc3NSA0NDN2NzhsLTEwIDI4Yy0xNS4yIDQzLjItMzYuOCA3My4yLTY2LjIgOTIuOC0xMy40IDguOC01NyAyNS40LTc2LjggMjktMjguMiA1LjItMzMuMiAxMi42LTIyIDMyLjIgMTEuMiAxOS40IDEyLjQgMzIuOCAxMS42IDEyOS42bC0uNiA4NS44IDUuNCA0LjZjMy42IDMgOS4yIDUuMiAxNiA2IDUuOC44IDYwLjIgMSAxMjAuNi42IDEwOC40LS42IDExMC4yLS42IDExOS01IDI0LTExLjYgNDAtMjcuNCA1MS42LTUwLjZsNS40LTExIC42LTM0N2MuNC0yMjMtLjItMzUzLjQtMS40LTM2NS0yLTE3LTIuNi0xOC42LTEzLTM0LTEwLjYtMTUuNC0yMi44LTI2LjItNDMuMi0zNy4yLTQuMi0yLjQtNjQuNi0yLjgtMzY2LTMuMi0xOTguNiAwLTM2NCAuNC0zNjcuNiAxLjR6Ii8+PC9zdmc+);
    }
    
    
    
    
    
</style>

        
        <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #FF4081 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #FF4081;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #FF4081;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #FF4081;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-image: url(/img/bg.png);
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"rel="stylesheet">


        <script>lsloader.load("js/jquery.min.js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==")</script>
    
    
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Analytics -->
    

    <!-- Custom Head -->
    
</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->

    <!-- Left aligned menu below button -->
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    
    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#前言"><span class="post-toc-number">1.</span> <span class="post-toc-text">前言</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#踩坑"><span class="post-toc-number">2.</span> <span class="post-toc-text">踩坑</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#发现"><span class="post-toc-number">3.</span> <span class="post-toc-text">发现</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#正文：-多表映射关联"><span class="post-toc-number"></span> <span class="post-toc-text">正文： 多表映射关联</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#一对一：比如一个人有一个头"><span class="post-toc-number">1.</span> <span class="post-toc-text">一对一：比如一个人有一个头</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#tips"><span class="post-toc-number">1.0.1.</span> <span class="post-toc-text">tips:</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#一对多：比如一个人有一群朋友（朋友也是person）"><span class="post-toc-number">2.</span> <span class="post-toc-text">一对多：比如一个人有一群朋友（朋友也是person）</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#多对多："><span class="post-toc-number">3.</span> <span class="post-toc-text">多对多：</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#后记"><span class="post-toc-number">4.</span> <span class="post-toc-text">后记</span></a></li></ol>
        <!--
        <li class="mdl-menu__item">
            Some Action
        </li>
        -->
    </ul>
    





<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                android greendao3.0 多表关联踩坑实践
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar_corner.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>Jafir</strong>
        <span>Jan 21, 2018</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/android/">android</a>
    </ul>
    

    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    
        
            <!-- Busuanzi Views -->
            <a class="post_share-link" href="#">
                <li class="mdl-menu__item">
                    <span id="busuanzi_container_page_pv">
                        <span id="busuanzi_value_page_pv"></span>&nbsp;Views
                    </span>
                </li>
            </a>
        
    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=android greendao3.0 多表关联踩坑实践&url=http://fly7632785.github.io/2018/01/21/android-greendao3.0 多表关联踩坑实践/index.html&pic=&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                Share to Weibo
            </li>
        </a>
    

    <!-- Share Twitter -->
    

    <!-- Share Facebook -->
    

    <!-- Share Google+ -->
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=Jafir&#39;s blog&title=android greendao3.0 多表关联踩坑实践&summary=what can&#39;t kill you makes you stronger&pics=http://fly7632785.github.io/img/avatar_corner.png&url=http://fly7632785.github.io/2018/01/21/android-greendao3.0 多表关联踩坑实践/index.html" target="_blank">
            <li class="mdl-menu__item">
                Share to QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
</ul>

</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>之前用过数据库框架：realm、kjdb，今天准备实践学习一下greendao 3.0。<br>greendao 3.0之前的版本有很大的不同，主要是增加了annotation注解，然后表之间和对象之间的关系也通过注解而变得更加灵活方便了。以前用过旧版本的都知道，对于多表多对象之间的关联，要写的代码不少。</p>
<p>我在学习greendao 3.0的时候，有一个感触，网上的文章很多，但是千篇一律，大多都是翻译官方文档而来，举得例子可谓是“无一例外”。网上搜罗了半天，收藏几篇比较好的帖子。<br><a href="http://www.open-open.com/lib/view/open1480319783903.html" target="_blank" rel="noopener">史上最高效的ORM方案——GreenDao3.0详解</a><br><a href="http://blog.csdn.net/crazymo_/article/details/54629916" target="_blank" rel="noopener"><a href="http://blog.csdn.net/crazymo_/article/details/54629916" target="_blank" rel="noopener">Android ORM——初识greenDAO 3及使用greenDAO 3前应该掌握的一些知识点（一）</a></a></p>
<p>特别是关于3.0对象多表多对象关联的博客更是没有，所以打算自己实践学习然后总结分享一番。</p>
<h4 id="踩坑"><a href="#踩坑" class="headerlink" title="踩坑"></a>踩坑</h4><p>主要踩了两个坑：</p>
<ul>
<li>greendao的关联关系是通过<strong>主外键（对象之间关联的id）</strong>来构建的。realm是直接通过对象关系来自动构建的。</li>
<li>如果属性是List&lt;&gt; xx,  greendao不会自动调用设置xx的值，只有<strong>手动调用getXX的时候获取</strong>.我在打印log的时候被坑惨了，无论怎么样都是为null.</li>
</ul>
<h4 id="发现"><a href="#发现" class="headerlink" title="发现"></a>发现</h4><ul>
<li>首先bean类，会自动生成一些方法，比如get set 构造方法 getSession等</li>
<li>如果是list或者数组类型的属性XX，只有getXX方法，没有setXX方法</li>
<li><p>如果你要打印bean类的toString方法，这里<strong>要调用getXXX方法，而不是直接打印对象</strong>（因为没有赋值,而是在getXX的时候才赋值的）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public String toString() &#123;</span><br><span class="line">    return &quot;Person&#123;&quot; +</span><br><span class="line">           &quot;students=&quot; + getStudents() +  //这里不是直接students</span><br><span class="line">            &quot;, id=&quot; + id +</span><br><span class="line">            &quot;, cardId=&quot; + cardId +</span><br><span class="line">            &quot;, age=&quot; + age +</span><br><span class="line">            &quot;, name=&apos;&quot; + name + &apos;\&apos;&apos; +</span><br><span class="line">            &quot;, average=&quot; + average +</span><br><span class="line">            &quot;, cid=&quot; + cid +</span><br><span class="line">            &quot;, cls=&quot; + cls +</span><br><span class="line">            &quot;, fid=&quot; + fid +</span><br><span class="line">            &quot;, friends=&quot; + getFriends() +</span><br><span class="line">            &apos;&#125;&apos;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>greendao支持 自身对自身的关系关联，比如</p>
</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/1311457-73bf8704cedd9252.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/640" alt=""></p>
<hr>
<h2 id="正文：-多表映射关联"><a href="#正文：-多表映射关联" class="headerlink" title="正文： 多表映射关联"></a>正文： 多表映射关联</h2><h4 id="一对一：比如一个人有一个头"><a href="#一对一：比如一个人有一个头" class="headerlink" title="一对一：比如一个人有一个头"></a>一对一：比如一个人有一个头</h4><p>如果是按照以往的对象关系数据库<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#person类中</span><br><span class="line"></span><br><span class="line">   @Id(autoincrement = true)</span><br><span class="line">    private Long id;</span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">//    private Long hid;</span><br><span class="line">    @ToOne</span><br><span class="line">    private Head head;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Head head = new Head();</span><br><span class="line">      head.setId(13l);</span><br><span class="line">      head.setName(&quot;head&quot;);</span><br><span class="line"></span><br><span class="line">      Person p = new Person();</span><br><span class="line">      p.setId(null);</span><br><span class="line">      p.setHead(head);//直接设置对象</span><br><span class="line">      p.setName(&quot;jafir&quot;);</span><br></pre></td></tr></table></figure>
<p>直接写对象，然后setHead(head) 就搞定了。但是在greendao中一切对象关联关系都是通过主外键来实现的。应该改为如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#person类中</span><br><span class="line">  @Id(autoincrement = true)</span><br><span class="line">    private Long id;</span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">    private Long hid;//这是与头关联的外键</span><br><span class="line">    @ToOne(joinProperty = &quot;hid&quot;) //这个是注解绑定 hid就是上面一行的hid</span><br><span class="line">    private Head head;//对象，但是不需要setHead</span><br></pre></td></tr></table></figure></p>
<p>build之后，就有setHid的方法了，我们的对象关联不采用setHead,而是setHid<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">PersonDao personDao = GreendaoHelper.getDaoSession().getPersonDao();</span><br><span class="line">        HeadDao headDao = GreendaoHelper.getDaoSession().getHeadDao();</span><br><span class="line"></span><br><span class="line">        Head head = new Head();</span><br><span class="line">        head.setId(13l);//这里的head id和person里的hid一样</span><br><span class="line">        head.setName(&quot;head&quot;);</span><br><span class="line"></span><br><span class="line">        Person p = new Person();</span><br><span class="line">        p.setId(null);</span><br><span class="line">        p.setHid(13l);//这里的hid是head的id,就是这样通过id构建起关联的</span><br><span class="line">        p.setName(&quot;jafir&quot;);</span><br><span class="line"></span><br><span class="line">        headDao.insert(head);</span><br><span class="line">        personDao.insert(p);</span><br><span class="line"></span><br><span class="line">        List&lt;Person&gt; persons = personDao.queryBuilder().build().list();</span><br><span class="line">        for (Person person : persons) &#123;</span><br><span class="line">            Log.d(&quot;debug&quot;,&quot;person:&quot;+person.toString());</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure></p>
<p>注意：person的toString()方法系统生成的需要修改一下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">   public String toString() &#123;</span><br><span class="line">       return &quot;Person&#123;&quot; +</span><br><span class="line">               &quot;head=&quot; + getHead() +//这里需要改为getHead</span><br><span class="line">               &quot;, name=&apos;&quot; + name + &apos;\&apos;&apos; +</span><br><span class="line">               &quot;, id=&quot; + id +</span><br><span class="line">               &apos;&#125;&apos;;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p>
<h6 id="tips"><a href="#tips" class="headerlink" title="tips:"></a>tips:</h6><ul>
<li>bean的id最好用Long类型而不是long<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> @Id(autoincrement = true)</span><br><span class="line">private Long id;</span><br><span class="line">Person p = new Person();</span><br><span class="line">        p.setId(null);</span><br><span class="line">        p.setHid(14l);</span><br><span class="line">        p.setName(&quot;jafir&quot;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>因为，如果<strong>Long</strong>,我们设置了id是自增长,我们可以<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### 一对多：比如一个老师有多个学生</span><br></pre></td></tr></table></figure></p>
<p>#teacher类中<br> @ToMany(referencedJoinProperty = “tid”)//指定与之关联的其他类的id<br> private List<student> studnets;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line">#student类中</span><br><span class="line">  @Id</span><br><span class="line">  private Long id;</span><br><span class="line">  private Long tid;//这个就是外键 就是person的id</span><br></pre></td></tr></table></figure></student></p>
<p>关系描述：<br>多个学生都有同一个老师，所以每个学生的tid，就应该是同样的，并且tid 就是老师的id ,这样就构成了1对多的关系</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1311457-ce1187ae365babec.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/640" alt=""></p>
<p>注意：学生的自增长id ,跟与老师关联的tid是不一样的，两码事</p>
<h4 id="一对多：比如一个人有一群朋友（朋友也是person）"><a href="#一对多：比如一个人有一群朋友（朋友也是person）" class="headerlink" title="一对多：比如一个人有一群朋友（朋友也是person）"></a>一对多：比如一个人有一群朋友（朋友也是person）</h4><p>按照我们上面的思路，那么person类里面就应该有一个外键指向自身的主键id<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#person类中</span><br><span class="line"> private Long id;//自身id</span><br><span class="line"> private Long fid;//外键关联id</span><br><span class="line"> @ToMany(referencedJoinProperty =&quot;fid&quot; )//指定与之关联的其他类的id</span><br><span class="line"> private List&lt;Person&gt; friends;</span><br></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1311457-3c4924653fee9baa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/640" alt=""><br>如果一个人的id是1，他有3个朋友，那么friends里面person的fid都是1，这样这个人调用getFriends就能拿到自己的3个朋友。主要就是通过设置id来构建关联关系的。</p>
<h4 id="多对多："><a href="#多对多：" class="headerlink" title="多对多："></a>多对多：</h4><p>多对多的话就比较复杂，不是两个表或者两个对象直接关联，而是要通过一个“第三者”</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1311457-76ff459f2380e8d1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#person类中</span><br><span class="line">    @Id(autoincrement = true)</span><br><span class="line">    private Long id;</span><br><span class="line">    private String name;</span><br><span class="line">   // 对多，@JoinEntity注解：entity 中间表；sourceProperty 实体属性；targetProperty 外链实体属性</span><br><span class="line">    @ToMany</span><br><span class="line">    @JoinEntity(</span><br><span class="line">            entity = JoinStudentToPerson.class,</span><br><span class="line">            sourceProperty = &quot;pid&quot;,</span><br><span class="line">            targetProperty = &quot;sid&quot;</span><br><span class="line">    )</span><br><span class="line">    private List&lt;Student&gt; students;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//中间表   “第三者”</span><br><span class="line">@Entity</span><br><span class="line">public class JoinStudentToPerson &#123;</span><br><span class="line">   @Id(autoincrement = true)</span><br><span class="line">    private Long id;</span><br><span class="line">    //和person关联的id</span><br><span class="line">    private Long pid;</span><br><span class="line">    //和student关联的id</span><br><span class="line">    private Long sid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@Entity</span><br><span class="line">public class Student &#123;</span><br><span class="line">    @Id</span><br><span class="line">    private Long id;</span><br><span class="line">    private String name;</span><br><span class="line">    // 对多，@JoinEntity注解：entity 中间表；sourceProperty 实体属性；targetProperty 外链实体属性</span><br><span class="line">    @ToMany</span><br><span class="line">    @JoinEntity(</span><br><span class="line">            entity = JoinStudentToPerson.class,</span><br><span class="line">            sourceProperty = &quot;sid&quot;,</span><br><span class="line">            targetProperty = &quot;pid&quot;</span><br><span class="line">    )</span><br><span class="line">    private List&lt;Person&gt; persons;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后测试代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">  private void test() &#123;</span><br><span class="line"></span><br><span class="line">        PersonDao personDao = GreendaoHelper.getDaoSession().getPersonDao();</span><br><span class="line">        HeadDao headDao = GreendaoHelper.getDaoSession().getHeadDao();</span><br><span class="line">        StudentDao studentDao = GreendaoHelper.getDaoSession().getStudentDao();</span><br><span class="line">        JoinStudentToPersonDao spDao = GreendaoHelper.getDaoSession().getJoinStudentToPersonDao();</span><br><span class="line"></span><br><span class="line">//        Head head = new Head();</span><br><span class="line">//        head.setId(14l);</span><br><span class="line">//        head.setName(&quot;head&quot;);</span><br><span class="line"></span><br><span class="line">        Person p1 = new Person();</span><br><span class="line">        p1.setId(1l);</span><br><span class="line">        p1.setName(&quot;jafir1&quot;);</span><br><span class="line">        Person p2 = new Person();</span><br><span class="line">        p2.setId(2l);</span><br><span class="line">        p2.setName(&quot;jafir2&quot;);</span><br><span class="line">        Person p3 = new Person();</span><br><span class="line">        p3.setId(3l);</span><br><span class="line">        p3.setName(&quot;jafir3&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        Student stu1 = new Student();</span><br><span class="line">        stu1.setId(1l);</span><br><span class="line">        stu1.setName(&quot;stu1&quot;);</span><br><span class="line">        Student stu2 = new Student();</span><br><span class="line">        stu2.setId(2l);</span><br><span class="line">        stu2.setName(&quot;stu2&quot;);</span><br><span class="line">        Student stu3 = new Student();</span><br><span class="line">        stu3.setId(3l);</span><br><span class="line">        stu3.setName(&quot;stu3&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        // 模拟 多对多关系</span><br><span class="line">        // 假如 p1有3个：stu1\stu2\stu3</span><br><span class="line">        //  stu1 stu2 stu3 都有2个 :p1\p2</span><br><span class="line"></span><br><span class="line">        //p1有stu1 stu2 stu3     那么反过来stu123都有p1</span><br><span class="line">        JoinStudentToPerson sp1 = new JoinStudentToPerson();</span><br><span class="line">        sp1.setPid(1l);</span><br><span class="line">        sp1.setSid(1l);</span><br><span class="line">        JoinStudentToPerson sp2 = new JoinStudentToPerson();</span><br><span class="line">        sp2.setPid(1l);</span><br><span class="line">        sp2.setSid(2l);</span><br><span class="line">        JoinStudentToPerson sp3 = new JoinStudentToPerson();</span><br><span class="line">        sp3.setPid(1l);</span><br><span class="line">        sp3.setSid(3l);</span><br><span class="line"></span><br><span class="line">        //p2有stu1 stu2 stu3     那么反过来stu123都有p2</span><br><span class="line">        JoinStudentToPerson sp4 = new JoinStudentToPerson();</span><br><span class="line">        sp4.setPid(2l);</span><br><span class="line">        sp4.setSid(1l);</span><br><span class="line">        JoinStudentToPerson sp5 = new JoinStudentToPerson();</span><br><span class="line">        sp5.setPid(2l);</span><br><span class="line">        sp5.setSid(2l);</span><br><span class="line">        JoinStudentToPerson sp6 = new JoinStudentToPerson();</span><br><span class="line">        sp6.setPid(2l);</span><br><span class="line">        sp6.setSid(3l);</span><br><span class="line"></span><br><span class="line">        spDao.insert(sp1);</span><br><span class="line">        spDao.insert(sp2);</span><br><span class="line">        spDao.insert(sp3);</span><br><span class="line">        spDao.insert(sp4);</span><br><span class="line">        spDao.insert(sp5);</span><br><span class="line">        spDao.insert(sp6);</span><br><span class="line"></span><br><span class="line">        personDao.insert(p1);</span><br><span class="line">        personDao.insert(p2);</span><br><span class="line">        personDao.insert(p3);</span><br><span class="line"></span><br><span class="line">        studentDao.insert(stu1);</span><br><span class="line">        studentDao.insert(stu2);</span><br><span class="line">        studentDao.insert(stu3);</span><br><span class="line"></span><br><span class="line">//        headDao.insert(head);</span><br><span class="line">//        personDao.insert(p1);</span><br><span class="line"></span><br><span class="line">        List&lt;Person&gt; persons = personDao.queryBuilder().build().list();</span><br><span class="line"></span><br><span class="line">        for (Person person : persons) &#123;</span><br><span class="line">            Log.d(&quot;debug&quot;,&quot;person:&quot;+person.toString());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>注意：在person和student的toString里面不能都写getStudents getPerson，不然会你调我，我调你，然后死循环，出现log打印Stack Overflow。只能单独打印测试结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">//打印person的测试结果</span><br><span class="line">Person&#123;</span><br><span class="line">students=[</span><br><span class="line">Student&#123;name=&apos;stu1&apos;, id=1&#125;, </span><br><span class="line">Student&#123;name=&apos;stu2&apos;, id=2&#125;,</span><br><span class="line"> Student&#123;name=&apos;stu3&apos;, id=3&#125;], </span><br><span class="line">head=null, hid=null, name=&apos;jafir1&apos;, id=1&#125;</span><br><span class="line"></span><br><span class="line">Person&#123;</span><br><span class="line">students=[</span><br><span class="line">Student&#123;name=&apos;stu1&apos;, id=1&#125;, </span><br><span class="line">Student&#123;name=&apos;stu2&apos;, id=2&#125;, </span><br><span class="line">Student&#123;name=&apos;stu3&apos;, id=3&#125;],</span><br><span class="line"> head=null, hid=null, name=&apos;jafir2&apos;, id=2&#125;</span><br><span class="line"></span><br><span class="line">Person&#123;</span><br><span class="line">students=[], </span><br><span class="line">head=null, hid=null, name=&apos;jafir3&apos;, id=3&#125;</span><br></pre></td></tr></table></figure></p>
<p>students的测试结果就不列出了。<br>总之实现起来就是这样。</p>
<h4 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h4><p>在探索3.0版本的时候，确实碰了不少壁，踩了很多坑，遇到了很多疑惑，但是通过自己不断地摸索探究测试，最终还是找到了解决的方法。希望对大家有用，于是分享出来，欢迎大家指正。</p>
<p>这个还要再说一下自己的看法：<br>对于greendao或者realm,个人觉得，realm确实更高级一点，是直接<strong>对象关联</strong>的，用起来也更方便一点，而且有很好的中文文档。greendao呢，其实还算是比较原始的数据库框架，但是它最大的优点就是<strong>效率高</strong>。</p>
<p>所以，如果你的数据量大要求效率，你应该使用greendao,不然简小的数据库还是建议使用realm。</p>

    

    
</div>


                

                <!-- Post Comments -->
                
                    
                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2018/01/21/android-OTG-读取usb设备文件并上传（问题解决）/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            Newer
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2018/01/21/android-scheme链接打开本地应用/" id="post_nav-older" class="next-content">
            Older
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar_corner.png" alt="Jafir's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        522648467@qq.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto:522648467@qq.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
                <li>
                    <a href="http://www.jianshu.com/u/d234d1569eed" target="_blank" title="Jianshu">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">date_range</i>
                        
                        Jianshu
                    </a>
                </li>
            
                <li>
                    <a href="https://github.com/fly7632785" target="_blank" title="Github">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">group_work</i>
                        
                        Github
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                Home
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    Archives
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2018/03/">March 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/02/">February 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/01/">January 2018<span class="sidebar_archives-count">10</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/02/">February 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/01/">January 2017<span class="sidebar_archives-count">3</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    

    <!-- Pages  -->
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            Theme - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    

    <!-- Google + -->
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/fly7632785" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-github">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>Jafir's blog
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import File -->


    <script>lsloader.load("js/lazyload.min.js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==")</script>
    <script>lsloader.load("js/js.min.js","/js/js.min.js?oAl/+lvaqTFV31JXTmbrNA==")</script>



    <script>lsloader.load("js/nprogress.js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==")</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#FF4081'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #FF4081, 0 0 15px #FF4081'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#FF4081',
        'border-left-color': '#FF4081'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>







    <!-- Busuanzi -->
    <script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>







<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Window Load-->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });
</script>

<!-- MathJax Load-->

<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Bing Background -->


<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.4.0 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
