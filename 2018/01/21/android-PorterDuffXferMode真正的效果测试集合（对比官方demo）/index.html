<!DOCTYPE html>
<html style="display: none;" lang="en">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.4.0 -->
    <script>window.materialVersion = "1.4.0"</script>

    <!-- Title -->
    
    <title>
        
            android PorterDuffXferMode真正的效果测试集合（对比官方demo） | 
        
        Jafir&#39;s blog
    </title>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">
    
    
    
    
    
    
    
        <link rel="dns-prefetch" href="https://busuanzi.ibruce.info"/>
    
    
    
    

    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="Jafir">
    <meta name="description" itemprop="description" content="what can&#39;t kill you makes you stronger">
    <meta name="keywords" content=",android">

    <!-- Site Verification -->
    
    

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/avatar_corner.png">
    <link rel="icon" sizes="192x192" href="/img/avatar_corner.png">
    <link rel="apple-touch-icon" href="/img/avatar_corner.png">

    <!--iOS -->
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Jafir&#39;s blog">

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://fly7632785.github.io">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="android PorterDuffXferMode真正的效果测试集合（对比官方demo） | Jafir&#39;s blog">
    <meta property="og:image" content="/img/avatar_corner.png" />
    <meta property="og:description" content="what can&#39;t kill you makes you stronger">
    <meta property="og:article:tag" content="android"> 

    
        <meta property="article:published_time" content="Jan 21, 2018" />
        <meta property="article:modified_time" content="Mar 13, 2018" />
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:title" content="android PorterDuffXferMode真正的效果测试集合（对比官方demo） | Jafir&#39;s blog">
    <meta name="twitter:description" content="what can&#39;t kill you makes you stronger">
    <meta name="twitter:image" content="/img/avatar_corner.png">
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="http://fly7632785.github.io" />

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="http://fly7632785.github.io/2018/01/21/android-PorterDuffXferMode真正的效果测试集合（对比官方demo）/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Jafir&#39;s blog",
        "logo": "/img/avatar_corner.png"
    },
    "author": {
        "@type": "Person",
        "name": "Jafir",
        "image": {
            "@type": "ImageObject",
            "url": "/img/avatar_corner.png"
        },
        "description": "Hi, welcome to Jafir's blog !,I will share something nice with you !"
    },
    "headline": "android PorterDuffXferMode真正的效果测试集合（对比官方demo）",
    "url": "http://fly7632785.github.io/2018/01/21/android-PorterDuffXferMode真正的效果测试集合（对比官方demo）/index.html",
    "datePublished": "Jan 21, 2018",
    "dateModified": "Mar 13, 2018",
    "description": "what can&#39;t kill you makes you stronger",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://fly7632785.github.io"
    }
}
</script>


    

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.en.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(key){try{localStorage.removeItem(key)}catch(e){}};lsloader.setLS=function(key,val){try{localStorage.setItem(key,val)}catch(e){}};lsloader.getLS=function(key){var val="";try{val=localStorage.getItem(key)}catch(e){val=""}return val};versionString="/*"+materialVersion+"*/";lsloader.clean=function(){try{var keys=[];for(var i=0;i<localStorage.length;i++){keys.push(localStorage.key(i))}keys.forEach(function(key){var data=lsloader.getLS(key);if(data&&data.indexOf(versionString)===-1){lsloader.removeLS(key)}})}catch(e){}};lsloader.clean();lsloader.load=function(jsname,jspath,cssonload){cssonload=cssonload||function(){};var code;code=this.getLS(jsname);if(code&&code.indexOf(versionString)===-1){this.removeLS(jsname);this.requestResource(jsname,jspath,cssonload);return}if(code){var versionNumber=code.split(versionString)[0];if(versionNumber!=jspath){console.log("reload:"+jspath);this.removeLS(jsname);this.requestResource(jsname,jspath,cssonload);return}code=code.split(versionString)[1];if(/\.js?.+$/.test(versionNumber)){this.jsRunSequence.push({name:jsname,code:code});this.runjs(jspath,jsname,code)}else{document.getElementById(jsname).appendChild(document.createTextNode(code));cssonload()}}else{this.requestResource(jsname,jspath,cssonload)}};lsloader.requestResource=function(name,path,cssonload){var that=this;if(/\.js?.+$/.test(path)){this.iojs(path,name,function(path,name,code){that.setLS(name,path+versionString+code);that.runjs(path,name,code)})}else if(/\.css?.+$/.test(path)){this.iocss(path,name,function(code){document.getElementById(name).appendChild(document.createTextNode(code));that.setLS(name,path+versionString+code)},cssonload)}};lsloader.iojs=function(path,jsname,callback){var that=this;that.jsRunSequence.push({name:jsname,code:""});try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(path,jsname,xhr.response);return}}that.jsfallback(path,jsname)}};xhr.send(null)}catch(e){that.jsfallback(path,jsname)}};lsloader.iocss=function(path,jsname,callback,cssonload){var that=this;try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(xhr.response);cssonload();return}}that.cssfallback(path,jsname,cssonload)}};xhr.send(null)}catch(e){that.cssfallback(path,jsname,cssonload)}};lsloader.iofonts=function(path,jsname,callback,cssonload){var that=this;try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(xhr.response);cssonload();return}}that.cssfallback(path,jsname,cssonload)}};xhr.send(null)}catch(e){that.cssfallback(path,jsname,cssonload)}};lsloader.runjs=function(path,name,code){if(!!name&&!!code){for(var k in this.jsRunSequence){if(this.jsRunSequence[k].name==name){this.jsRunSequence[k].code=code}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var script=document.createElement("script");script.appendChild(document.createTextNode(this.jsRunSequence[0].code));script.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(script);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var that=this;var script=document.createElement("script");script.src=this.jsRunSequence[0].path;script.type="text/javascript";this.jsRunSequence[0].status="loading";script.onload=function(){that.jsRunSequence.shift();if(that.jsRunSequence.length>0){that.runjs()}};document.body.appendChild(script)}};lsloader.tagLoad=function(path,name){this.jsRunSequence.push({name:name,code:"",path:path,status:"failed"});this.runjs()};lsloader.jsfallback=function(path,name){if(!!this.jsnamemap[name]){return}else{this.jsnamemap[name]=name}for(var k in this.jsRunSequence){if(this.jsRunSequence[k].name==name){this.jsRunSequence[k].code="";this.jsRunSequence[k].status="failed";this.jsRunSequence[k].path=path}}this.runjs()};lsloader.cssfallback=function(path,name,cssonload){if(!!this.cssnamemap[name]){return}else{this.cssnamemap[name]=1}var link=document.createElement("link");link.type="text/css";link.href=path;link.rel="stylesheet";link.onload=link.onerror=cssonload;var root=document.getElementsByTagName("script")[0];root.parentNode.insertBefore(link,root)};lsloader.runInlineScript=function(scriptId,codeId){var code=document.getElementById(codeId).innerText;this.jsRunSequence.push({name:scriptId,code:code});this.runjs()};lsloader.loadCombo=function(jslist){var updateList="";var requestingModules={};for(var k in jslist){var LS=this.getLS(jslist[k].name);if(!!LS){var version=LS.split(versionString)[0];var code=LS.split(versionString)[1]}else{var version=""}if(version==jslist[k].path){this.jsRunSequence.push({name:jslist[k].name,code:code,path:jslist[k].path})}else{this.jsRunSequence.push({name:jslist[k].name,code:null,path:jslist[k].path,status:"comboloading"});requestingModules[jslist[k].name]=true;updateList+=(updateList==""?"":";")+jslist[k].path}}var that=this;if(!!updateList){var xhr=new XMLHttpRequest;xhr.open("get",combo+updateList,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){that.runCombo(xhr.response,requestingModules);return}}else{for(var i in that.jsRunSequence){if(requestingModules[that.jsRunSequence[i].name]){that.jsRunSequence[i].status="failed"}}that.runjs()}}};xhr.send(null)}this.runjs()};lsloader.runCombo=function(comboCode,requestingModules){comboCode=comboCode.split("/*combojs*/");comboCode.shift();for(var k in this.jsRunSequence){if(!!requestingModules[this.jsRunSequence[k].name]&&!!comboCode[0]){this.jsRunSequence[k].status="comboJS";this.jsRunSequence[k].code=comboCode[0];this.setLS(this.jsRunSequence[k].name,this.jsRunSequence[k].path+versionString+comboCode[0]);comboCode.shift()}}this.runjs()}})();</script>

    <!-- Import CSS & jQuery -->
    
        <style id="css/material.min.css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("css/material.min.css","/css/material.min.css?fJTiM/K1J3dWIruo3pxtAw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";})</script>
        <style id="css/style.min.css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("css/style.min.css","/css/style.min.css?oCSEO3ST+aEypEwttTDI9g==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";})</script>
        
        
            <style>
    
    
    
    
    
    
    
    .footer-sns-github {
        background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgY2xhc3M9Imljb24iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGQ9Ik0xMzguNCA3OGMtNi40IDEuNC0yNi40IDE0LjItMzYgMjIuOC04IDcuMi0yMiAyOS44LTI0LjQgMzkuMi0xLjYgNi40LTIgMTEzLjItMS42IDM2OCAuNiAyOTkuNCAxIDM1OS44IDMuNCAzNjQgMTEgMjAuMiAyMS42IDMyLjQgMzcuMiA0MyAxNS42IDEwLjYgMTcuMiAxMS4yIDM0LjIgMTMuMiAxMC42IDEuMiA2My40IDEuNiAxMjcuNiAxLjRsMTA5LjYtLjYgNi02LjggNi4yLTYuOC0xLjItMjUuMmMtLjgtMTUuOC0uMi0zMy40IDEuNC00Ny4yIDMtMjUuNCAxLjQtMzYuMi02LTQzLjItNS00LjYtNi4yLTQuOC0zMC42LTQuMi0yNy42LjgtMjQgMS42LTY4LjgtMTYtOC42LTMuNC0yMi42LTE4LTI4LjQtMjkuOC0xMS40LTIyLjgtMjctNDUtMzkuMi01NS42LTE0LTEyLjItMTkuOC0yMC44LTE5LjgtMjguNiAwLTExLjYgMTMuNi0xMi42IDMzLjItMi40IDE2LjYgOC44IDIwLjggMTIuNCA0MC44IDM2LjIgMjQuMiAyOC42IDMxIDMzLjYgNTQgMzkuNiAxNS4yIDQgNDIuMiAzIDUxLjQtMS44IDktNC42IDE4LTE1LjIgMjQuNC0yOS4yIDExLjQtMjQuMiA3LjQtMzEuMi0yMC42LTM2LjgtOS44LTItMjkuMi04LTQzLjQtMTMuNC00MC40LTE1LjgtNjQuNi0zNy40LTg1LjQtNzYuMi0xMS42LTIxLjgtMTUuNC0zMy0xOC4yLTUzLjYtNC4yLTMyLjItNC44LTYwLjItMS40LTg0IDMuNC0yMy44IDYuOC0zMi44IDIwLjItNTQgNC02IDguOC0xNS42IDExLTIxLjQgMy44LTEwIDMuOC0xMS42IDEtMzAtNS4yLTM0LjItMy4yLTUyLjQgNy42LTcwLjIgNy4yLTEyLjIgMTUtMTcuMiAyNC4yLTE1LjggMTIuOCAyLjIgNTIgMTcuNCA2Ni44IDI2LjIgMjYgMTUgMjkgMTUuNCA4Mi40IDcuMiAyNC42LTMuOCAzMy44LTQuMiA2MC0zLjIgMTcgLjYgNDEuNCAzIDU0IDUuMiAzOC40IDYuNiA0OS42IDUuMiA3My0xMCA2LjYtNC4yIDE3LjQtOS40IDI0LTExLjYgNi42LTIuMiAxNi01LjggMjEtOC4yIDEzLTYgMjgtNS42IDM1LjYuOCAxMi40IDEwLjQgMTguNiA0MS40IDE0LjQgNzEuNi00LjQgMzAuNi0zIDM5LjQgOC40IDUzLjggMy40IDQuNCAxMS4yIDE5LjIgMTcuNCAzMy4yTDc3NSA0NDN2NzhsLTEwIDI4Yy0xNS4yIDQzLjItMzYuOCA3My4yLTY2LjIgOTIuOC0xMy40IDguOC01NyAyNS40LTc2LjggMjktMjguMiA1LjItMzMuMiAxMi42LTIyIDMyLjIgMTEuMiAxOS40IDEyLjQgMzIuOCAxMS42IDEyOS42bC0uNiA4NS44IDUuNCA0LjZjMy42IDMgOS4yIDUuMiAxNiA2IDUuOC44IDYwLjIgMSAxMjAuNi42IDEwOC40LS42IDExMC4yLS42IDExOS01IDI0LTExLjYgNDAtMjcuNCA1MS42LTUwLjZsNS40LTExIC42LTM0N2MuNC0yMjMtLjItMzUzLjQtMS40LTM2NS0yLTE3LTIuNi0xOC42LTEzLTM0LTEwLjYtMTUuNC0yMi44LTI2LjItNDMuMi0zNy4yLTQuMi0yLjQtNjQuNi0yLjgtMzY2LTMuMi0xOTguNiAwLTM2NCAuNC0zNjcuNiAxLjR6Ii8+PC9zdmc+);
    }
    
    
    
    
    
</style>

        
        <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #FF4081 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #FF4081;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #FF4081;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #FF4081;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-image: url(/img/bg.png);
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"rel="stylesheet">


        <script>lsloader.load("js/jquery.min.js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==")</script>
    
    
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Analytics -->
    

    <!-- Custom Head -->
    
</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->

    <!-- Left aligned menu below button -->
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    
    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#前言"><span class="post-toc-number">1.</span> <span class="post-toc-text">前言</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#好正式开始-Xfermode的条件测试："><span class="post-toc-number"></span> <span class="post-toc-text">好正式开始 Xfermode的条件测试：</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#总览全局"><span class="post-toc-number"></span> <span class="post-toc-text">总览全局</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#总结"><span class="post-toc-number"></span> <span class="post-toc-text">总结</span></a>
        <!--
        <li class="mdl-menu__item">
            Some Action
        </li>
        -->
    </ul>
    





<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                android PorterDuffXferMode真正的效果测试集合（对比官方demo）
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar_corner.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>Jafir</strong>
        <span>Jan 21, 2018</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/android/">android</a>
    </ul>
    

    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    
        
            <!-- Busuanzi Views -->
            <a class="post_share-link" href="#">
                <li class="mdl-menu__item">
                    <span id="busuanzi_container_page_pv">
                        <span id="busuanzi_value_page_pv"></span>&nbsp;Views
                    </span>
                </li>
            </a>
        
    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=android PorterDuffXferMode真正的效果测试集合（对比官方demo）&url=http://fly7632785.github.io/2018/01/21/android-PorterDuffXferMode真正的效果测试集合（对比官方demo）/index.html&pic=&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                Share to Weibo
            </li>
        </a>
    

    <!-- Share Twitter -->
    

    <!-- Share Facebook -->
    

    <!-- Share Google+ -->
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=Jafir&#39;s blog&title=android PorterDuffXferMode真正的效果测试集合（对比官方demo）&summary=what can&#39;t kill you makes you stronger&pics=http://fly7632785.github.io/img/avatar_corner.png&url=http://fly7632785.github.io/2018/01/21/android-PorterDuffXferMode真正的效果测试集合（对比官方demo）/index.html" target="_blank">
            <li class="mdl-menu__item">
                Share to QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
</ul>

</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h5 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h5><p>当时在做头像imageView，就是切圆头像<br>1、如果我们先画一个circle（非bitmap），然后setXfermode 为Src_In，再画一个bitmap(图片的)。成功，完美 。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1311457-1d790e3f8065c18d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="成功"><br>2、如果我们先画一个bitmap(图片的)，然后setXfermode 为Dsr_In,再画circle。粗略学习了网上那张图之后，理论上应该也是成功的，但是却出现了问题。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1311457-cc02fd317d50ee46.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="不成功"></p>
<p>所以，我很疑惑，就开始了各种探索学习测试。（当然，至于为什么出现这种情况，文末会有解释）</p>
<p>到目前为止已经被PorterDuffXferMode坑了有1天时间了，网上看了无数的文章，很乱很杂，没有写得能够让我很清楚很明白且有点权威的文献，因为很多没有测试结果，并且我没有亲身实践过，所以，现在我要重新自己动手实践一下。</p>
<p>在网上搜罗了一大圈，在群里和很多人交流了，大概有2篇文章，个人认为说得在理。（建议大家先去看一下，不过可能你会跟我一样，看了之后就更云里雾里，但是还是需要亲身实践为好）</p>
<p>感谢两位作者。</p>
<p><a href="http://m.blog.csdn.net/article/details?id=50534175" target="_blank" rel="noopener">PorterDuffXferMode不正确的真正原因PorterDuffXferMode深入试验</a></p>
<p><a href="http://blog.csdn.net/iispring/article/details/50472485" target="_blank" rel="noopener">Android中Canvas绘图之PorterDuffXfermode使用及工作原理详解</a></p>
<p><strong>第一篇</strong>主要总结：<br>如果想让PorterDuffXferMode按照预期Demo（或者效果图）的效果图像实现，必须满足以下条件：<br><strong>1、关闭硬件加速。（经过作者修改为 开启硬件离屏缓存）<br>2、两个bitmap大小尽量一样。<br>3、背景色为透明色。<br>4、如果两个bitmap位置不完全一样，可能也是预期效果，只不过你看到的效果和你自己脑补的预期效果不一致。</strong></p>
<p><strong>第二篇</strong>主要总结：<br><strong>PorterDuffXfermode用于实现新绘制的像素与Canvas上对应位置已有的像素按照混合规则进行颜色混合。</strong></p>
<hr>
<p>我主要是在第一篇的结论基础上去做测试，并给大家展示测试结果。<br>下面高能篇幅，如果你不是真正在学习研究PorterDuffXfermode踩坑的人，如果你没有耐心阅读的，就可以别往下看了。<br>亦或你也想亲手尝试，那还是先去尝试一下吧。</p>
<hr>
<p>首先代码图：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">public class TestXfermodeView extends View &#123;</span><br><span class="line">    public TestXfermodeView(Context context) &#123;</span><br><span class="line">        super(context);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public TestXfermodeView(Context context, AttributeSet attrs) &#123;</span><br><span class="line">        super(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public TestXfermodeView(Context context, AttributeSet attrs, int defStyleAttr) &#123;</span><br><span class="line">        super(context, attrs, defStyleAttr);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onDraw(Canvas canvas) &#123;</span><br><span class="line">        super.onDraw(canvas);</span><br><span class="line"></span><br><span class="line">        Bitmap circle = getCircleBitmap();</span><br><span class="line">        Bitmap rectangle = getRetangleBitmap();</span><br><span class="line"></span><br><span class="line">//        int sc = canvas.saveLayer(0, 0, 400, 400, null,</span><br><span class="line">//                Canvas.MATRIX_SAVE_FLAG |</span><br><span class="line">//                        Canvas.CLIP_SAVE_FLAG |</span><br><span class="line">//                        Canvas.HAS_ALPHA_LAYER_SAVE_FLAG |</span><br><span class="line">//                        Canvas.FULL_COLOR_LAYER_SAVE_FLAG |</span><br><span class="line">//                        Canvas.CLIP_TO_LAYER_SAVE_FLAG);</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * 开启硬件离屏缓存</span><br><span class="line">         */</span><br><span class="line">        setLayerType(LAYER_TYPE_HARDWARE, null);</span><br><span class="line">        Paint paint = new Paint();</span><br><span class="line">        /**</span><br><span class="line">         * 画bitmap的也透明</span><br><span class="line">         */</span><br><span class="line">        canvas.drawARGB(0, 0, 0, 0);</span><br><span class="line">//        canvas.drawCircle(100, 100, 100, paint);</span><br><span class="line">        canvas.drawBitmap(rectangle, 100, 100, paint);</span><br><span class="line">//        Bitmap b= BitmapFactory.decodeResource(getResources(),R.mipmap.ic_launcher);</span><br><span class="line">//        Rect rect = new Rect(0, 0, 100, 100);</span><br><span class="line">//        canvas.drawBitmap(b,rect, rect, paint);</span><br><span class="line">//        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC));</span><br><span class="line">//        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_IN));</span><br><span class="line">//        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_OUT));</span><br><span class="line">//        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_ATOP));</span><br><span class="line">//        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_OVER));</span><br><span class="line"></span><br><span class="line">//        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST));</span><br><span class="line">//        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_IN));</span><br><span class="line">//        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_OUT));</span><br><span class="line">//        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_ATOP));</span><br><span class="line">//        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_OVER));</span><br><span class="line"></span><br><span class="line">//        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.XOR));</span><br><span class="line">//        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));</span><br><span class="line">//        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.ADD));</span><br><span class="line">//        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.MULTIPLY));</span><br><span class="line">//        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DARKEN));</span><br><span class="line">//        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.LIGHTEN));</span><br><span class="line">//        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.OVERLAY));</span><br><span class="line">//        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SCREEN));</span><br><span class="line">        canvas.drawBitmap(circle, 0, 0, paint);</span><br><span class="line">//        canvas.restoreToCount(sc);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @NonNull</span><br><span class="line">    private Bitmap getRetangleBitmap() &#123;</span><br><span class="line">        /**</span><br><span class="line">         * bm1 在bitmap上面画正方形</span><br><span class="line">         */</span><br><span class="line">        Bitmap rectangle = Bitmap.createBitmap(200, 200, Bitmap.Config.ARGB_8888);</span><br><span class="line">        Canvas c1 = new Canvas(rectangle);</span><br><span class="line">        Paint p1 = new Paint(Paint.ANTI_ALIAS_FLAG);</span><br><span class="line">        p1.setColor(getResources().getColor(R.color.colorAccent));</span><br><span class="line">        /**</span><br><span class="line">         * 设置透明</span><br><span class="line">         */</span><br><span class="line">        c1.drawARGB(0, 0, 0, 0);</span><br><span class="line">        c1.drawRect(0, 0, 200, 200, p1);</span><br><span class="line">        return rectangle;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @NonNull</span><br><span class="line">    private Bitmap getCircleBitmap() &#123;</span><br><span class="line">        /**</span><br><span class="line">         * bm 在bitmap上面画圆</span><br><span class="line">         */</span><br><span class="line">        Bitmap circle = Bitmap.createBitmap(200, 200, Bitmap.Config.ARGB_8888);</span><br><span class="line">        Canvas c = new Canvas(circle);</span><br><span class="line">        /**</span><br><span class="line">         * 设置透明</span><br><span class="line">         */</span><br><span class="line">        c.drawARGB(0, 0, 0, 0);</span><br><span class="line">        Paint p = new Paint(Paint.ANTI_ALIAS_FLAG);</span><br><span class="line">        p.setColor(getResources().getColor(R.color.colorPrimary));</span><br><span class="line">        c.drawCircle(100, 100, 100, p);</span><br><span class="line">        return circle;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这俩方法 就是在2个新的bitmap上画圆和正方形<br>注意是跟官方demo一致 <strong> 先画 正方形 后画 圆</strong><br>满足条件<br><strong>2、两个bitmap大小尽量一样。<br>3、背景色为透明色。</strong></p>
<p>onDraw中也设置了透明和开启硬件离屏缓存<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">setLayerType(LAYER_TYPE_HARDWARE, null);</span><br><span class="line">       Paint paint = new Paint();</span><br><span class="line">       /**</span><br><span class="line">        * 画bitmap的也透明</span><br><span class="line">        */</span><br><span class="line">       canvas.drawARGB(0, 0, 0, 0);</span><br></pre></td></tr></table></figure></p>
<p>满足条件<br><strong>1、开启硬件离屏缓存</strong>（顺便说一下它的好处）</p>
<pre><code>- 1.解决xfermode黑色问题。
- 2.效率比关闭硬件加速高3倍以上
</code></pre><h3 id="好正式开始-Xfermode的条件测试："><a href="#好正式开始-Xfermode的条件测试：" class="headerlink" title="好正式开始 Xfermode的条件测试："></a>好正式开始 Xfermode的条件测试：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC));</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/1311457-754c0b6d61b351f1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="PorterDuff.Mode.SRC"><br>可以看出圆的canvas背景（透明，activity本身就是白色，所以这里为白色）也显示出来并且覆盖在了正方形上面</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST));</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/1311457-0613ecff661625fe.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="PorterDuff.Mode.DST"><br>可以看出后画的圆已经不显示了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_IN));</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/1311457-2cb7351f70b49922.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="PorterDuff.Mode.SRC_IN"><br>可以看出圆的<strong>canvas背景显示出来</strong>， 只取了与正方形<strong>相交的部分</strong>（是canvas背景区域相交的部分），并且相交部分显示的是<strong>后画</strong>的<strong>圆</strong>的颜色</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">paint.setXfermode(newPorterDuffXfermode(PorterDuff.Mode.DST_IN));</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/1311457-969d4479ee7371f5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="PorterDuff.Mode.DST_IN"><br>可以看出圆的<strong>canvas背景显示出来</strong>， 只取了与正方形<strong>相交的部分</strong>（是canvas背景区域相交的部分），并且相交部分显示的是<strong>先画</strong>的<strong>正方形</strong>的颜色<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">paint.setXfermode(newPorterDuffXfermode(PorterDuff.Mode.XOR));</span><br></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1311457-354d41f24e1bafca.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="PorterDuff.Mode.XOR"><br>可以看出取的是<strong>相交部分之外</strong>，并且与官方demo效果一致<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">paint.setXfermode(newPorterDuffXfermode(PorterDuff.Mode.CLEAR));</span><br></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1311457-ac3954a3a64a9bfe.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="PorterDuff.Mode.CLEAR"><br>可以看出<strong>后画</strong>的<strong>圆</strong>不见了 ，并且<strong>相交的部分也不见了</strong></p>
<p>这前面几个是相对比较常用，也是比较重要的。</p>
<p>后面的我直接列出来</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1311457-2d9284eef84de8fd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="PorterDuff.Mode.SRC_OUT"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1311457-414dc08dcc4d67a1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="PorterDuff.Mode.SRC_ATOP"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1311457-1a2aa3a16595f547.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="PorterDuff.Mode.SRC_OVER"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1311457-68b79dda92a19db6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="PorterDuff.Mode.DST_OUT"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1311457-eb5219787ee38ce0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="PorterDuff.Mode.DST_ATOP"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1311457-f3dc6a1420311882.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="PorterDuff.Mode.DST_OVER"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1311457-4b0087f29d24e930.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="PorterDuff.Mode.ADD"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1311457-9650b3ed79cccab9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="PorterDuff.Mode.MUTIPLY"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1311457-f5c46b9049166e04.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="PorterDuff.Mode.DARKEN"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1311457-90123e62d6385489.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="PorterDuff.Mode.OVERPLAY"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1311457-b9c3af1f7e50c5e5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="PorterDuff.Mode.SCREEN"></p>
<h3 id="总览全局"><a href="#总览全局" class="headerlink" title="总览全局"></a>总览全局</h3><p><img src="http://upload-images.jianshu.io/upload_images/1311457-a84859d50c0765e3?imageMogr2/auto-orient/strip%7CimageView2/2/w/440" alt="官方demo"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1311457-1758f01d16feb3b0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/440" alt="我的"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1311457-4641819c69a2b5fa?imageMogr2/auto-orient/strip%7CimageView2/2/w/440" alt="第二篇文献里面的"></p>
<p>注：我的是跟官方demo一样先画正方形后画圆，第二篇文献里面的图是先画圆后画正方形，可以对比一下，体会一下。</p>
<p>我说说我们的demo和官方api demo的区别：</p>
<ul>
<li>我的demo里面，两个bitmap大小一样，是在bitmap里面填充画满 circle和rectangle,并且在画两个Bitmap的时候，是调整的它的位置来画的；</li>
<li>官方的demo里面，是两个bitmap大小一样，circle的bitmap里面只填充了 左上角2/3，而rectangle的bitmap里面只填充了 右下角的2/3，并且在画的时候，两个bitmap的位置大小都是一样的</li>
</ul>
<p>我的</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1311457-e82d8c4b1c4e7c49.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="circle的bitmap"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1311457-683334825b5b9b60.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="rectangle的bitmap"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">canvas.drawBitmap(rectangle,**100, 100**, paint);</span><br><span class="line">canvas.drawBitmap(circle, 0, 0, paint);</span><br></pre></td></tr></table></figure>
<p>官方的<br><img src="http://upload-images.jianshu.io/upload_images/1311457-0ac2c837454b7b6f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="circle的bitmap"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1311457-9abd3d62e2f26c27.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="rectangle的bitmap"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">canvas.drawBitmap(mSrcB, **0, 0**, paint);</span><br><span class="line">canvas.drawBitmap(mDstB, 0, 0, paint);</span><br></pre></td></tr></table></figure></p>
<p>大家可以再去对比对比两张总结图，思考思考。<br>如果想要探寻为什么不同的方法会导致不同的效果，也可以去阅读页首的第二篇文章</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>如果你想要做出实际效果，那么你要按照官方的那种方式，你就能够做出跟网上普遍流传的那张图一样的效果。</p>
<p>如果你要根据自己的实际情况来，那么你可能就要考虑我的这种方式和官方的那种方式来决定怎么做了。</p>
<p>至于文首的问题，<strong>原因如下：</strong><br>因为我们的Xfermode 叠合裁剪，都是建立在不同的层级上，重新画一个bitmap会新开一层。<br>第一种：先画circle 在canvas那层，再画Bitmap，新开了一层，中间镶嵌Xfermode，成功。<br>第二种:   先画bitmap，新开了一层，再画circle，还是在bitmap那层，中间镶嵌 Xfermode,不成功。</p>
<p><strong>解决方案：</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//第一种</span><br><span class="line">       </span><br><span class="line">       canvas.drawCircle(scaleBitmap.getWidth() / 2, scaleBitmap.getHeight() / 2, scaleBitmap.getWidth() / 2, paint);</span><br><span class="line"></span><br><span class="line">       paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_IN));</span><br><span class="line"></span><br><span class="line">       canvas.drawBitmap(scaleBitmap, rect, rect1, paint);</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//第二种</span><br><span class="line">        canvas.drawBitmap(scaleBitmap, rect, rect1, paint);</span><br><span class="line"></span><br><span class="line">        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_IN));</span><br><span class="line">      </span><br><span class="line">        Bitmap bitmap = Bitmap.createBitmap(scaleBitmap.getWidth(), scaleBitmap.getHeight(), Bitmap.Config.ARGB_8888);</span><br><span class="line">        Canvas canvas1 = new Canvas(bitmap);</span><br><span class="line">        Paint p = new Paint();</span><br><span class="line">        canvas1.drawARGB(0, 0, 0, 0);</span><br><span class="line">        canvas1.drawCircle(scaleBitmap.getWidth() / 2, scaleBitmap.getHeight() / 2, scaleBitmap.getWidth() / 2, p);</span><br><span class="line">        canvas.drawBitmap(bitmap, rect, rect1, paint);</span><br></pre></td></tr></table></figure>
<p><strong>ps:</strong><br>写这篇文章呢，主要是我个人想要实践一下，顺便记录一下实验结果。最后也顺便分享出来，个人感觉这里确实有很多坑，如果你是真正在研究PorterDuffXformode的人，那你肯定会跟我一样很疑惑，希望这篇文章能够带给你一个思路。</p>

    

    
</div>


                

                <!-- Post Comments -->
                
                    
                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2018/01/21/android-view的多种移动方式（测试集合）/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            Newer
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2017/02/21/微信小程序-开发经验总结/" id="post_nav-older" class="next-content">
            Older
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar_corner.png" alt="Jafir's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        522648467@qq.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto:522648467@qq.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
                <li>
                    <a href="http://www.jianshu.com/u/d234d1569eed" target="_blank" title="Jianshu">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">date_range</i>
                        
                        Jianshu
                    </a>
                </li>
            
                <li>
                    <a href="https://github.com/fly7632785" target="_blank" title="Github">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">group_work</i>
                        
                        Github
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                Home
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    Archives
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2018/03/">March 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/02/">February 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/01/">January 2018<span class="sidebar_archives-count">10</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/02/">February 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/01/">January 2017<span class="sidebar_archives-count">3</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    

    <!-- Pages  -->
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            Theme - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    

    <!-- Google + -->
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/fly7632785" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-github">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>Jafir's blog
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import File -->


    <script>lsloader.load("js/lazyload.min.js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==")</script>
    <script>lsloader.load("js/js.min.js","/js/js.min.js?oAl/+lvaqTFV31JXTmbrNA==")</script>



    <script>lsloader.load("js/nprogress.js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==")</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#FF4081'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #FF4081, 0 0 15px #FF4081'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#FF4081',
        'border-left-color': '#FF4081'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>







    <!-- Busuanzi -->
    <script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>







<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Window Load-->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });
</script>

<!-- MathJax Load-->

<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Bing Background -->


<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.4.0 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
